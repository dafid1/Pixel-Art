<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>تفاصيل الوظيفة | بيكسل آرت</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* المتغيرات الأساسية */
        :root {
            /* نظام الألوان */
            --primary-color: #0a9396;
            --primary-dark: #005f73;
            --primary-light: #94d2bd;
            --secondary-color: #ee9b00;
            --secondary-dark: #ca6702;
            --secondary-light: #ffb347;
            --accent-color: #9b5de5;
            --accent-dark: #7209b7;
            --success-color: #2a9d8f;
            --warning-color: #e9c46a;
            --danger-color: #e76f51;
            --info-color: #4cc9f0;
            
            /* نظام التصميم */
            --bg-primary: rgba(255, 255, 255, 0.98);
            --bg-secondary: rgba(248, 250, 252, 0.96);
            --bg-tertiary: rgba(241, 245, 249, 0.95);
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-tertiary: #64748b;
            --border-color: rgba(226, 232, 240, 0.95);
            --shadow-color: rgba(0, 0, 0, 0.08);
            --shadow-heavy: rgba(0, 0, 0, 0.15);
            
            /* الأنيميشن */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-medium: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);
            
            /* التأثيرات */
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.25);
            --backdrop-blur: blur(20px);
            --backdrop-saturate: saturate(180%);
            
            /* الطبقات */
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal-backdrop: 1040;
            --z-modal: 1050;
            --z-popover: 1060;
            --z-tooltip: 1070;
            --z-toast: 1080;
        }

        /* الوضع الداكن */
        .dark-mode {
            --bg-primary: rgba(15, 23, 42, 0.98);
            --bg-secondary: rgba(30, 41, 59, 0.96);
            --bg-tertiary: rgba(51, 65, 85, 0.95);
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-tertiary: #94a3b8;
            --border-color: rgba(71, 85, 105, 0.95);
            --shadow-color: rgba(0, 0, 0, 0.3);
            --shadow-heavy: rgba(0, 0, 0, 0.4);
            --glass-bg: rgba(15, 23, 42, 0.85);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Cairo', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, 
                rgba(10, 147, 150, 0.05) 0%,
                rgba(238, 155, 0, 0.05) 50%,
                rgba(155, 93, 229, 0.05) 100%);
            color: var(--text-primary);
            line-height: 1.5;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        /* تأثير الخلفية الديناميكية */
        .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .gradient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: float 20s infinite ease-in-out;
        }

        .orb-1 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, var(--primary-color) 0%, transparent 70%);
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--secondary-color) 0%, transparent 70%);
            top: 60%;
            right: 10%;
            animation-delay: -5s;
        }

        .orb-3 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, var(--accent-color) 0%, transparent 70%);
            bottom: 10%;
            left: 20%;
            animation-delay: -10s;
        }

        /* شريط الحالة الذكي */
        .smart-status-bar {
            height: 44px;
            background: linear-gradient(90deg, 
                var(--primary-color) 0%,
                var(--secondary-color) 50%,
                var(--accent-color) 100%);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: var(--z-fixed);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .status-content {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .status-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-badge i {
            animation: pulse 2s infinite;
        }

        /* الهيدر الرئيسي */
        .main-header {
            height: 80px;
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-bottom: 1px solid var(--glass-border);
            padding: 0 24px;
            position: fixed;
            top: 44px;
            left: 0;
            right: 0;
            z-index: var(--z-sticky);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .brand-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            box-shadow: 0 8px 32px rgba(10, 147, 150, 0.3);
            transition: transform var(--transition-medium);
        }

        .logo-icon:hover {
            transform: rotate(15deg) scale(1.1);
        }

        .logo-text h1 {
            font-size: 22px;
            font-weight: 900;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
        }

        .logo-text span {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .header-back {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 16px;
            transition: all var(--transition-fast);
        }

        .header-back:hover {
            color: var(--primary-color);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header-action {
            width: 48px;
            height: 48px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            font-size: 20px;
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
        }

        .header-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px var(--shadow-color);
            color: var(--primary-color);
        }

        .action-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: linear-gradient(135deg, var(--danger-color), #d1664b);
            color: white;
            min-width: 20px;
            height: 20px;
            border-radius: 10px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 6px;
            font-weight: 700;
            border: 2px solid var(--bg-primary);
            box-shadow: 0 2px 8px rgba(231, 111, 81, 0.3);
        }

        /* المحتوى الرئيسي */
        .main-content {
            padding: 124px 0 100px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .job-details-container {
            padding: 0 24px;
        }

        /* بطاقة الوظيفة الكبيرة */
        .job-hero-card {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-radius: 28px;
            overflow: hidden;
            box-shadow: 0 20px 60px var(--shadow-heavy);
            border: 1px solid var(--glass-border);
            margin-bottom: 32px;
            position: relative;
        }

        .job-hero-header {
            padding: 32px;
            background: linear-gradient(135deg, 
                rgba(10, 147, 150, 0.1) 0%,
                rgba(238, 155, 0, 0.1) 50%,
                rgba(155, 93, 229, 0.1) 100%);
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }

        .job-badges {
            position: absolute;
            top: 32px;
            left: 32px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 2;
        }

        .job-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 6px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .badge-featured {
            background: linear-gradient(135deg, var(--secondary-color), var(--secondary-dark));
            color: white;
        }

        .badge-urgent {
            background: linear-gradient(135deg, var(--danger-color), #d1664b);
            color: white;
        }

        .badge-remote {
            background: linear-gradient(135deg, var(--success-color), #21867a);
            color: white;
        }

        .badge-new {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-dark));
            color: white;
        }

        .job-hero-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 32px;
            margin-top: 24px;
        }

        .job-title-section {
            flex: 1;
        }

        .job-main-title {
            font-size: 28px;
            font-weight: 900;
            color: var(--text-primary);
            margin-bottom: 16px;
            line-height: 1.3;
        }

        .job-meta-info {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 24px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 600;
        }

        .meta-item i {
            color: var(--primary-color);
            font-size: 16px;
        }

        .job-company-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .company-avatar {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 24px;
            flex-shrink: 0;
        }

        .company-details h3 {
            font-size: 18px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .company-stats {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .company-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--secondary-color);
            font-weight: 700;
        }

        .job-price-section {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 24px 32px;
            border-radius: 20px;
            color: white;
            min-width: 280px;
            text-align: center;
        }

        .price-label {
            font-size: 14px;
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .price-value {
            font-size: 36px;
            font-weight: 900;
            margin-bottom: 16px;
            line-height: 1;
        }

        .price-unit {
            font-size: 16px;
            font-weight: 600;
            opacity: 0.9;
        }

        .price-deadline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 14px;
            opacity: 0.9;
        }

        .price-deadline.urgent {
            color: #ffd166;
            font-weight: 700;
        }

        /* محتوى الوظيفة */
        .job-content-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 32px;
            margin-bottom: 32px;
        }

        /* القسم الرئيسي */
        .job-main-content {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        .job-section {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 0 8px 32px var(--shadow-color);
            border: 1px solid var(--glass-border);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border-color);
        }

        .section-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 800;
            color: var(--text-primary);
            flex: 1;
        }

        .job-description {
            color: var(--text-primary);
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 24px;
        }

        .job-description p {
            margin-bottom: 16px;
        }

        .job-description ul {
            margin: 16px 0;
            padding-right: 24px;
        }

        .job-description li {
            margin-bottom: 8px;
            position: relative;
        }

        .job-description li::before {
            content: "•";
            color: var(--primary-color);
            font-size: 20px;
            position: absolute;
            right: -20px;
        }

        /* المهارات المطلوبة */
        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 24px;
        }

        .skill-tag {
            padding: 10px 20px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all var(--transition-fast);
            border: 1px solid var(--border-color);
        }

        .skill-tag:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(10, 147, 150, 0.2);
        }

        .skill-tag i {
            font-size: 12px;
        }

        .skill-level {
            margin-right: auto;
            font-size: 12px;
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
        }

        /* متطلبات الوظيفة */
        .requirements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .requirement-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 16px;
            border: 1px solid var(--border-color);
        }

        .requirement-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            flex-shrink: 0;
        }

        .requirement-content h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .requirement-content p {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* التقدم الزمني */
        .timeline-container {
            position: relative;
            padding: 24px 0;
        }

        .timeline-item {
            display: flex;
            gap: 20px;
            margin-bottom: 32px;
            position: relative;
        }

        .timeline-item:last-child {
            margin-bottom: 0;
        }

        .timeline-marker {
            width: 24px;
            height: 24px;
            background: var(--bg-secondary);
            border: 3px solid var(--border-color);
            border-radius: 50%;
            position: relative;
            flex-shrink: 0;
            z-index: 1;
        }

        .timeline-item.active .timeline-marker {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-color: var(--primary-color);
        }

        .timeline-item.completed .timeline-marker {
            background: var(--success-color);
            border-color: var(--success-color);
        }

        .timeline-item.completed .timeline-marker::after {
            content: "✓";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .timeline-line {
            position: absolute;
            top: 24px;
            right: 11px;
            bottom: -32px;
            width: 2px;
            background: var(--border-color);
        }

        .timeline-item:last-child .timeline-line {
            display: none;
        }

        .timeline-content {
            flex: 1;
            padding-top: 2px;
        }

        .timeline-date {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 4px;
            font-weight: 600;
        }

        .timeline-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .timeline-description {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* الشريط الجانبي */
        .job-sidebar {
            display: flex;
            flex-direction: column;
            gap: 32px;
            position: sticky;
            top: 140px;
            height: fit-content;
        }

        /* بطاقة العميل */
        .client-card {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 0 8px 32px var(--shadow-color);
            border: 1px solid var(--glass-border);
        }

        .client-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .client-avatar-large {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 28px;
            flex-shrink: 0;
        }

        .client-info h3 {
            font-size: 20px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .client-tag {
            display: inline-block;
            padding: 6px 16px;
            background: rgba(10, 147, 150, 0.1);
            color: var(--primary-color);
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
        }

        .client-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .client-stat {
            text-align: center;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 16px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 900;
            color: var(--primary-color);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* خيارات التقديم */
        .apply-options {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 0 8px 32px var(--shadow-color);
            border: 1px solid var(--glass-border);
        }

        .apply-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .apply-header h3 {
            font-size: 20px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .apply-header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .apply-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
        }

        .apply-btn {
            width: 100%;
            padding: 20px;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-family: inherit;
            position: relative;
            overflow: hidden;
        }

        .apply-btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .apply-btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .apply-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .apply-btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--secondary-dark));
        }

        .apply-btn-secondary:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .btn-icon {
            font-size: 18px;
        }

        /* إحصائيات الوظيفة */
        .job-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .job-stat {
            text-align: center;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 16px;
        }

        .job-stat-value {
            font-size: 20px;
            font-weight: 900;
            color: var(--primary-color);
            margin-bottom: 4px;
        }

        .job-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* وظائف مشابهة */
        .similar-jobs {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 0 8px 32px var(--shadow-color);
            border: 1px solid var(--glass-border);
        }

        .similar-job-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: 1px solid transparent;
        }

        .similar-job-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px var(--shadow-color);
        }

        .similar-job-card:last-child {
            margin-bottom: 0;
        }

        .similar-job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .similar-job-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .similar-job-company {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .similar-job-price {
            font-size: 18px;
            font-weight: 800;
            color: var(--secondary-color);
        }

        .similar-job-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* الشريط السفلي الثابت */
        .job-bottom-bar {
            height: 90px;
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-top: 1px solid var(--glass-border);
            padding: 0 24px;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: var(--z-fixed);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 -4px 32px var(--shadow-color);
        }

        .bottom-bar-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .bottom-action {
            width: 56px;
            height: 56px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            font-size: 22px;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .bottom-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px var(--shadow-color);
        }

        .bottom-action.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-color: transparent;
        }

        .bottom-bar-right {
            flex: 1;
            max-width: 400px;
            margin-left: 24px;
        }

        .quick-apply-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .quick-apply-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(10, 147, 150, 0.3);
        }

        .quick-apply-btn.applied {
            background: var(--success-color);
        }

        /* نافذة التطبيق الذكية */
        .smart-application-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-medium);
        }

        .smart-application-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-container {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            -webkit-backdrop-filter: var(--backdrop-blur);
            border-radius: 32px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 32px 80px rgba(0, 0, 0, 0.4);
            border: 1px solid var(--glass-border);
            transform: translateY(40px);
            transition: transform var(--transition-medium);
        }

        .smart-application-modal.show .modal-container {
            transform: translateY(0);
        }

        .modal-header {
            padding: 32px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, 
                rgba(10, 147, 150, 0.1) 0%,
                rgba(238, 155, 0, 0.1) 100%);
        }

        .modal-header h2 {
            font-size: 24px;
            font-weight: 900;
            color: var(--text-primary);
            margin: 0;
        }

        .modal-close {
            width: 48px;
            height: 48px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            color: var(--danger-color);
            border-color: var(--danger-color);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 32px;
            overflow-y: auto;
            max-height: calc(90vh - 160px);
        }

        /* أنيميشن */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(20px) rotate(240deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* تحسينات للأندرويد */
        .android-optimized {
            -webkit-overflow-scrolling: touch;
        }

        .touch-feedback {
            position: relative;
            overflow: hidden;
        }

        .touch-feedback::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: inherit;
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.3s;
            pointer-events: none;
        }

        .touch-feedback:active::after {
            transform: translate(-50%, -50%) scale(1);
        }

        /* التجاوب */
        @media (max-width: 1200px) {
            .job-content-grid {
                grid-template-columns: 1fr;
            }
            
            .job-sidebar {
                position: static;
                margin-top: 32px;
            }
        }

        @media (max-width: 768px) {
            html {
                font-size: 14px;
            }
            
            .main-header {
                height: 70px;
                padding: 0 16px;
            }
            
            .main-content {
                padding: 114px 0 160px;
            }
            
            .job-details-container {
                padding: 0 16px;
            }
            
            .job-hero-content {
                flex-direction: column;
                gap: 24px;
            }
            
            .job-price-section {
                width: 100%;
            }
            
            .job-section {
                padding: 24px;
            }
            
            .job-bottom-bar {
                height: 80px;
                padding: 0 16px;
            }
            
            .bottom-action {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }
            
            .quick-apply-btn {
                padding: 14px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .header-nav {
                display: none;
            }
            
            .job-main-title {
                font-size: 22px;
            }
            
            .job-hero-header {
                padding: 24px;
            }
            
            .job-badges {
                top: 24px;
                left: 24px;
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .requirements-grid {
                grid-template-columns: 1fr;
            }
            
            .client-stats-grid,
            .job-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .bottom-bar-left {
                gap: 12px;
            }
        }

        /* دعم Safe Areas للأجهزة الحديثة */
        @supports (padding: max(0px)) {
            body {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
            }
            
            .smart-status-bar {
                height: calc(44px + env(safe-area-inset-top));
                padding-top: env(safe-area-inset-top);
            }
            
            .main-header {
                top: calc(44px + env(safe-area-inset-top));
            }
            
            .main-content {
                padding-top: calc(124px + env(safe-area-inset-top));
            }
            
            .job-bottom-bar {
                height: calc(90px + env(safe-area-inset-bottom));
                padding-bottom: env(safe-area-inset-bottom);
            }
        }

        /* تحسينات الأداء */
        .performance-optimized {
            will-change: transform, opacity;
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        /* تحسينات اللمس */
        @media (hover: none) and (pointer: coarse) {
            .skill-tag:hover,
            .similar-job-card:hover,
            .apply-btn:hover,
            .bottom-action:hover,
            .quick-apply-btn:hover {
                transform: none;
            }
            
            .touch-feedback:active::after {
                transform: translate(-50%, -50%) scale(1);
            }
        }
    </style>
</head>
<body class="android-optimized">
    <!-- الخلفية الديناميكية -->
    <div class="dynamic-background">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- شريط الحالة الذكي -->
    <div class="smart-status-bar">
        <div class="status-content">
            <span id="currentTime">--:--</span>
            <div class="status-badge">
                <i class="fas fa-wifi"></i>
                <span>5G</span>
            </div>
            <div class="status-badge">
                <i class="fas fa-battery-three-quarters"></i>
                <span>85%</span>
            </div>
        </div>
        <div class="status-content">
            <div class="status-badge">
                <i class="fas fa-eye"></i>
                <span id="viewCount">جاري التحميل...</span>
            </div>
        </div>
    </div>

    <!-- الهيدر الرئيسي -->
    <header class="main-header">
        <div class="header-left">
            <a href="javascript:history.back()" class="header-back">
                <i class="fas fa-arrow-right"></i>
                <span>رجوع</span>
            </a>
        </div>

        <div class="header-right">
            <div class="header-action" onclick="toggleDarkMode()" id="darkModeToggle">
                <i class="fas fa-moon"></i>
            </div>
            <div class="header-action" onclick="toggleNotifications()">
                <i class="fas fa-bell"></i>
                <span class="action-badge">3</span>
            </div>
            <div class="header-action" onclick="toggleShare()">
                <i class="fas fa-share-alt"></i>
            </div>
        </div>
    </header>

    <!-- المحتوى الرئيسي -->
    <main class="main-content">
        <div class="job-details-container">
            <!-- بطاقة الوظيفة الكبيرة -->
            <div class="job-hero-card" id="jobHeroCard">
                <div class="job-hero-header">
                    <div class="job-badges" id="jobBadges">
                        <!-- سيتم إضافة الشارات ديناميكياً -->
                    </div>
                    
                    <div class="job-hero-content">
                        <div class="job-title-section">
                            <h1 class="job-main-title" id="jobTitle">مصمم UI/UX متقدم لتطبيق ذكاء اصطناعي</h1>
                            
                            <div class="job-meta-info" id="jobMeta">
                                <!-- سيتم إضافة البيانات الوصفية ديناميكياً -->
                            </div>
                            
                            <div class="job-company-info">
                                <div class="company-avatar" id="companyAvatar">ت</div>
                                <div class="company-details">
                                    <h3 id="companyName">شركة التقنية المتقدمة</h3>
                                    <div class="company-stats">
                                        <div class="company-rating">
                                            <i class="fas fa-star"></i>
                                            <span id="companyRating">4.9</span>
                                            <span>(124 تقييم)</span>
                                        </div>
                                        <span>•</span>
                                        <span id="companyLocation">الرياض، السعودية</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="job-price-section">
                            <div class="price-label">الراتب المقدم</div>
                            <div class="price-value" id="jobPrice">8,500</div>
                            <div class="price-unit">ريال سعودي</div>
                            <div class="price-deadline urgent" id="jobDeadline">
                                <i class="fas fa-clock"></i>
                                ينتهي خلال 3 أيام
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- شبكة محتوى الوظيفة -->
            <div class="job-content-grid">
                <!-- القسم الرئيسي -->
                <div class="job-main-content">
                    <!-- قسم الوصف -->
                    <div class="job-section">
                        <div class="section-header">
                            <div class="section-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <h2 class="section-title">وصف الوظيفة</h2>
                        </div>
                        <div class="job-description" id="jobDescription">
                            <!-- سيتم إضافة الوصف ديناميكياً -->
                        </div>
                    </div>

                    <!-- قسم المهارات المطلوبة -->
                    <div class="job-section">
                        <div class="section-header">
                            <div class="section-icon">
                                <i class="fas fa-tools"></i>
                            </div>
                            <h2 class="section-title">المهارات المطلوبة</h2>
                        </div>
                        <div class="skills-container" id="skillsContainer">
                            <!-- سيتم إضافة المهارات ديناميكياً -->
                        </div>
                    </div>

                    <!-- قسم المتطلبات -->
                    <div class="job-section">
                        <div class="section-header">
                            <div class="section-icon">
                                <i class="fas fa-clipboard-check"></i>
                            </div>
                            <h2 class="section-title">متطلبات الوظيفة</h2>
                        </div>
                        <div class="requirements-grid" id="requirementsGrid">
                            <!-- سيتم إضافة المتطلبات ديناميكياً -->
                        </div>
                    </div>

                    <!-- قسم التقدم الزمني -->
                    <div class="job-section">
                        <div class="section-header">
                            <div class="section-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h2 class="section-title">مراحل التقديم</h2>
                        </div>
                        <div class="timeline-container" id="timelineContainer">
                            <!-- سيتم إضافة الجدول الزمني ديناميكياً -->
                        </div>
                    </div>
                </div>

                <!-- الشريط الجانبي -->
                <div class="job-sidebar">
                    <!-- بطاقة العميل -->
                    <div class="client-card">
                        <div class="client-header">
                            <div class="client-avatar-large" id="clientLargeAvatar">ت</div>
                            <div class="client-info">
                                <h3 id="clientName">شركة التقنية المتقدمة</h3>
                                <span class="client-tag">شركة ناشئة</span>
                            </div>
                        </div>
                        
                        <div class="client-stats-grid">
                            <div class="client-stat">
                                <div class="stat-value">124</div>
                                <div class="stat-label">وظيفة منشورة</div>
                            </div>
                            <div class="client-stat">
                                <div class="stat-value">94%</div>
                                <div class="stat-label">رضا العملاء</div>
                            </div>
                            <div class="client-stat">
                                <div class="stat-value">3.2</div>
                                <div class="stat-label">أيام متوسط الرد</div>
                            </div>
                            <div class="client-stat">
                                <div class="stat-value">2018</div>
                                <div class="stat-label">سنة التأسيس</div>
                            </div>
                        </div>
                        
                        <button class="apply-btn apply-btn-secondary" onclick="viewCompanyProfile()">
                            <i class="fas fa-building btn-icon"></i>
                            عرض صفحة الشركة
                        </button>
                    </div>

                    <!-- خيارات التقديم -->
                    <div class="apply-options">
                        <div class="apply-header">
                            <h3>تقديم على الوظيفة</h3>
                            <p>اختر طريقة التقديم المناسبة لك</p>
                        </div>
                        
                        <div class="apply-buttons">
                            <button class="apply-btn apply-btn-primary touch-feedback" onclick="openQuickApply()">
                                <i class="fas fa-paper-plane btn-icon"></i>
                                تقديم سريع
                            </button>
                            <button class="apply-btn apply-btn-secondary touch-feedback" onclick="openAdvancedApply()">
                                <i class="fas fa-file-upload btn-icon"></i>
                                تقديم متقدم
                            </button>
                        </div>
                        
                        <div class="job-stats">
                            <div class="job-stat">
                                <div class="job-stat-value" id="applicantsCount">48</div>
                                <div class="job-stat-label">مقدمين</div>
                            </div>
                            <div class="job-stat">
                                <div class="job-stat-value" id="viewsCount">1.2K</div>
                                <div class="job-stat-label">مشاهدات</div>
                            </div>
                            <div class="job-stat">
                                <div class="job-stat-value" id="matchScore">95%</div>
                                <div class="job-stat-label">مطابقة</div>
                            </div>
                            <div class="job-stat">
                                <div class="job-stat-value">3</div>
                                <div class="job-stat-label">أيام متبقية</div>
                            </div>
                        </div>
                    </div>

                    <!-- وظائف مشابهة -->
                    <div class="similar-jobs">
                        <div class="section-header">
                            <div class="section-icon">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <h2 class="section-title">وظائف مشابهة</h2>
                        </div>
                        
                        <div id="similarJobsContainer">
                            <!-- سيتم إضافة الوظائف المشابهة ديناميكياً -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- الشريط السفلي الثابت -->
    <div class="job-bottom-bar">
        <div class="bottom-bar-left">
            <button class="bottom-action touch-feedback" onclick="toggleSaveJob()" id="saveButton">
                <i class="far fa-bookmark"></i>
            </button>
            <button class="bottom-action touch-feedback" onclick="toggleLikeJob()" id="likeButton">
                <i class="far fa-heart"></i>
            </button>
            <button class="bottom-action touch-feedback" onclick="openChat()">
                <i class="far fa-comment"></i>
            </button>
        </div>
        
        <div class="bottom-bar-right">
            <button class="quick-apply-btn touch-feedback" onclick="openQuickApply()" id="applyButton">
                <i class="fas fa-paper-plane"></i>
                <span>تقدم الآن</span>
            </button>
        </div>
    </div>

    <!-- نافذة التطبيق الذكية -->
    <div class="smart-application-modal" id="applicationModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="modalTitle">تقديم على الوظيفة</h2>
                <button class="modal-close" onclick="closeApplicationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- سيتم إضافة محتوى النافذة ديناميكياً -->
            </div>
        </div>
    </div>

    <!-- نظام الذكاء الاصطناعي -->
    <script>
        // نظام إدارة تفاصيل الوظيفة
        class JobDetailsSystem {
            constructor() {
                this.jobId = this.getJobIdFromURL();
                this.currentJob = null;
                this.isJobSaved = false;
                this.isJobLiked = false;
                this.hasApplied = false;
                this.userProfile = null;
                this.init();
            }

            async init() {
                await this.loadUserProfile();
                await this.loadJobDetails();
                await this.loadSimilarJobs();
                this.setupEventListeners();
                this.renderUI();
                this.startRealTimeUpdates();
            }

            getJobIdFromURL() {
                const urlParams = new URLSearchParams(window.location.search);
                return parseInt(urlParams.get('id')) || 1;
            }

            async loadUserProfile() {
                const user = JSON.parse(localStorage.getItem('currentUser')) || {
                    id: 1,
                    name: "أحمد محمد",
                    skills: ['UI/UX', 'Adobe Photoshop', 'Figma', 'Illustrator', 'React'],
                    experience: '3 سنوات',
                    portfolio: true,
                    savedJobs: JSON.parse(localStorage.getItem('savedJobs')) || [],
                    likedJobs: JSON.parse(localStorage.getItem('likedJobs')) || [],
                    appliedJobs: JSON.parse(localStorage.getItem('appliedJobs')) || []
                };
                
                this.userProfile = user;
                this.isJobSaved = user.savedJobs.includes(this.jobId);
                this.isJobLiked = user.likedJobs.includes(this.jobId);
                this.hasApplied = user.appliedJobs.includes(this.jobId);
            }

            async loadJobDetails() {
                // محاكاة بيانات من API
                const jobsDatabase = [
                    {
                        id: 1,
                        title: "مصمم UI/UX متقدم لتطبيق ذكاء اصطناعي",
                        company: "شركة التقنية المتقدمة",
                        companyLogo: "ت",
                        rating: 4.9,
                        reviews: 124,
                        category: "UI/UX",
                        type: "دوام كامل",
                        location: "الرياض، السعودية",
                        remote: true,
                        experience: "3+ سنوات",
                        description: `
                            <p>نبحث عن مصمم UI/UX محترف لتصميم واجهة تطبيق ذكاء اصطناعي متقدم يعمل في مجال التحليل المالي.</p>
                            <p><strong>المهام الرئيسية:</strong></p>
                            <ul>
                                <li>تصميم تجربة مستخدم متكاملة للتطبيق من الصفر</li>
                                <li>إجراء أبحاث المستخدمين واختبارات سهولة الاستخدام</li>
                                <li>إنشاء نماذج أولية تفاعلية عالية الدقة</li>
                                <li>التعاون مع فريق التطوير لضمان التنفيذ الأمثل</li>
                                <li>تطوير نظام تصميم Design System متكامل</li>
                            </ul>
                            <p><strong>ماذا نقدم لك:</strong></p>
                            <ul>
                                <li>فرصة العمل على مشاريع متقدمة في مجال الذكاء الاصطناعي</li>
                                <li>بيئة عمل مرنة وداعمة للإبداع</li>
                                <li>فرص نمو وتطور مهني مستمر</li>
                                <li>مشاريع متنوعة ومثيرة للتحدي</li>
                            </ul>
                        `,
                        skills: [
                            { name: "Figma", level: "متقدم", required: true },
                            { name: "Adobe XD", level: "متوسط", required: true },
                            { name: "UI Design", level: "متقدم", required: true },
                            { name: "User Research", level: "متوسط", required: true },
                            { name: "Prototyping", level: "متقدم", required: true },
                            { name: "Design Systems", level: "متوسط", required: true },
                            { name: "Wireframing", level: "متقدم", required: true },
                            { name: "User Testing", level: "متوسط", required: true }
                        ],
                        requirements: [
                            { icon: "fa-graduation-cap", label: "المؤهل", value: "بكالوريوس تصميم أو مجال ذي صلة" },
                            { icon: "fa-briefcase", label: "الخبرة", value: "3+ سنوات في تصميم UI/UX" },
                            { icon: "fa-language", label: "اللغات", value: "العربية والإنجليزية" },
                            { icon: "fa-clock", label: "نوع الدوام", value: "دوام كامل" },
                            { icon: "fa-laptop-house", label: "مكان العمل", value: "عن بُعد/مكتب" },
                            { icon: "fa-calendar", label: "مدة المشروع", value: "6 أشهر قابل للتجديد" }
                        ],
                        timeline: [
                            { date: "الأول من مارس", title: "استلام الطلبات", description: "بداية استقبال الطلبات", status: "completed" },
                            { date: "15 مارس", title: "مراجعة الطلبات", description: "مراجعة وتقييم الطلبات المستلمة", status: "completed" },
                            { date: "20-25 مارس", title: "المقابلات", description: "مقابلات مع المرشحين المناسبين", status: "active" },
                            { date: "30 مارس", title: "الإعلان عن النتائج", description: "إخطار المرشحين المقبولين", status: "pending" },
                            { date: "5 أبريل", title: "بداية العمل", description: "بداية التعاقد والانضمام للفريق", status: "pending" }
                        ],
                        price: 8500,
                        currency: "ريال سعودي",
                        deadline: "2024-03-15",
                        urgent: true,
                        featured: true,
                        remote: true,
                        new: true,
                        applicants: 48,
                        views: 1250,
                        matchScore: 95,
                        postedDate: "2024-02-20",
                        companyType: "شركة ناشئة",
                        companyFounded: 2018,
                        companyJobs: 124,
                        companySatisfaction: 94,
                        avgResponseTime: 3.2
                    },
                    {
                        id: 2,
                        title: "مصمم جرافيك لعلامة تجارية فاخرة",
                        company: "مجموعة الرفاهية",
                        companyLogo: "ر",
                        price: 12000,
                        type: "مشروع",
                        category: "تصميم جرافيك",
                        matchScore: 88
                    },
                    {
                        id: 3,
                        title: "مطور واجهات أمامية مع تصميم",
                        company: "شركة الحلول الرقمية",
                        companyLogo: "ح",
                        price: 15000,
                        type: "دوام كامل",
                        category: "تطوير ويب",
                        matchScore: 92
                    },
                    {
                        id: 4,
                        title: "مصمم موشن جرافيك لمشروع تعليمي",
                        company: "أكاديمية المستقبل",
                        companyLogo: "أ",
                        price: 6500,
                        type: "مشروع",
                        category: "موشن جرافيك",
                        matchScore: 76
                    }
                ];

                this.currentJob = jobsDatabase.find(job => job.id === this.jobId) || jobsDatabase[0];
            }

            async loadSimilarJobs() {
                // محاكاة بيانات الوظائف المشابهة
                this.similarJobs = [
                    {
                        id: 2,
                        title: "مصمم جرافيك لعلامة تجارية فاخرة",
                        company: "مجموعة الرفاهية",
                        price: 12000,
                        type: "مشروع",
                        deadline: "7 أيام",
                        matchScore: 88
                    },
                    {
                        id: 3,
                        title: "مطور واجهات أمامية مع تصميم",
                        company: "شركة الحلول الرقمية",
                        price: 15000,
                        type: "دوام كامل",
                        deadline: "5 أيام",
                        matchScore: 92
                    },
                    {
                        id: 5,
                        title: "مصمم تجربة مستخدم للتطبيقات المالية",
                        company: "بنك التقنية",
                        price: 18000,
                        type: "دوام كامل",
                        deadline: "14 أيام",
                        matchScore: 94
                    }
                ];
            }

            setupEventListeners() {
                // تحسينات اللمس
                this.setupTouchGestures();
                
                // تحديث الوقت
                this.updateTime();
                
                // تحديث عدد المشاهدات
                this.incrementViewCount();
                
                // استجابة زر الرجوع
                window.addEventListener('popstate', () => {
                    this.showLoadingAnimation();
                });
            }

            setupTouchGestures() {
                let touchStartX = 0;
                let touchEndX = 0;

                document.addEventListener('touchstart', e => {
                    touchStartX = e.changedTouches[0].screenX;
                }, { passive: true });

                document.addEventListener('touchend', e => {
                    touchEndX = e.changedTouches[0].screenX;
                    this.handleSwipe(touchStartX, touchEndX);
                }, { passive: true });

                // تحسينات التمرير
                document.addEventListener('scroll', () => {
                    this.handleScrollEffects();
                }, { passive: true });
            }

            handleSwipe(startX, endX) {
                const swipeDistance = startX - endX;
                const minSwipeDistance = 50;

                if (Math.abs(swipeDistance) > minSwipeDistance) {
                    if (swipeDistance > 0) {
                        // سحب لليسار - الذهاب للوظيفة التالية
                        this.showNextJob();
                    } else {
                        // سحب لليمين - الرجوع للصفحة السابقة
                        if (history.length > 1) {
                            history.back();
                        }
                    }
                }
            }

            handleScrollEffects() {
                const header = document.querySelector('.main-header');
                const scrollY = window.scrollY;
                
                if (scrollY > 100) {
                    header.style.backdropFilter = 'blur(30px)';
                    header.style.backgroundColor = 'var(--glass-bg)';
                } else {
                    header.style.backdropFilter = 'var(--backdrop-blur)';
                }
            }

            renderUI() {
                this.renderJobBadges();
                this.renderJobMeta();
                this.renderJobDescription();
                this.renderSkills();
                this.renderRequirements();
                this.renderTimeline();
                this.renderClientInfo();
                this.renderJobStats();
                this.renderSimilarJobs();
                this.updateActionButtons();
                this.showWelcomeMessage();
            }

            renderJobBadges() {
                const badgesContainer = document.getElementById('jobBadges');
                const badges = [];
                
                if (this.currentJob.featured) {
                    badges.push(`<div class="job-badge badge-featured"><i class="fas fa-crown"></i> مميز</div>`);
                }
                if (this.currentJob.urgent) {
                    badges.push(`<div class="job-badge badge-urgent"><i class="fas fa-fire"></i> مستعجل</div>`);
                }
                if (this.currentJob.remote) {
                    badges.push(`<div class="job-badge badge-remote"><i class="fas fa-laptop-house"></i> عن بُعد</div>`);
                }
                if (this.currentJob.new) {
                    badges.push(`<div class="job-badge badge-new"><i class="fas fa-bolt"></i> جديد</div>`);
                }
                
                badgesContainer.innerHTML = badges.join('');
            }

            renderJobMeta() {
                const metaContainer = document.getElementById('jobMeta');
                const metaItems = [
                    { icon: 'fa-briefcase', text: this.currentJob.category },
                    { icon: 'fa-clock', text: this.currentJob.type },
                    { icon: 'fa-map-marker-alt', text: this.currentJob.location },
                    { icon: 'fa-user-tie', text: this.currentJob.experience }
                ];
                
                metaContainer.innerHTML = metaItems.map(item => `
                    <div class="meta-item">
                        <i class="fas ${item.icon}"></i>
                        <span>${item.text}</span>
                    </div>
                `).join('');
            }

            renderJobDescription() {
                document.getElementById('jobTitle').textContent = this.currentJob.title;
                document.getElementById('jobDescription').innerHTML = this.currentJob.description;
                document.getElementById('companyName').textContent = this.currentJob.company;
                document.getElementById('companyAvatar').textContent = this.currentJob.companyLogo;
                document.getElementById('companyRating').textContent = this.currentJob.rating;
                document.getElementById('companyLocation').textContent = this.currentJob.location;
                document.getElementById('jobPrice').textContent = this.currentJob.price.toLocaleString();
                
                // حساب الأيام المتبقية
                const deadline = new Date(this.currentJob.deadline);
                const today = new Date();
                const daysLeft = Math.ceil((deadline - today) / (1000 * 60 * 60 * 24));
                document.getElementById('jobDeadline').innerHTML = `
                    <i class="fas fa-clock"></i>
                    ${daysLeft > 0 ? `ينتهي خلال ${daysLeft} يوم` : 'انتهى الموعد'}
                `;
            }

            renderSkills() {
                const skillsContainer = document.getElementById('skillsContainer');
                skillsContainer.innerHTML = this.currentJob.skills.map(skill => `
                    <div class="skill-tag touch-feedback">
                        <i class="fas fa-check-circle"></i>
                        <span>${skill.name}</span>
                        <span class="skill-level">${skill.level}</span>
                    </div>
                `).join('');
            }

            renderRequirements() {
                const requirementsContainer = document.getElementById('requirementsGrid');
                requirementsContainer.innerHTML = this.currentJob.requirements.map(req => `
                    <div class="requirement-item">
                        <div class="requirement-icon">
                            <i class="fas ${req.icon}"></i>
                        </div>
                        <div class="requirement-content">
                            <h4>${req.label}</h4>
                            <p>${req.value}</p>
                        </div>
                    </div>
                `).join('');
            }

            renderTimeline() {
                const timelineContainer = document.getElementById('timelineContainer');
                timelineContainer.innerHTML = this.currentJob.timeline.map((item, index) => {
                    const isActive = item.status === 'active';
                    const isCompleted = item.status === 'completed';
                    
                    return `
                        <div class="timeline-item ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}">
                            <div class="timeline-marker"></div>
                            <div class="timeline-line"></div>
                            <div class="timeline-content">
                                <div class="timeline-date">${item.date}</div>
                                <div class="timeline-title">${item.title}</div>
                                <div class="timeline-description">${item.description}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderClientInfo() {
                document.getElementById('clientName').textContent = this.currentJob.company;
                document.getElementById('clientLargeAvatar').textContent = this.currentJob.companyLogo;
            }

            renderJobStats() {
                document.getElementById('applicantsCount').textContent = this.currentJob.applicants;
                document.getElementById('viewsCount').textContent = this.formatViews(this.currentJob.views);
                document.getElementById('matchScore').textContent = `${this.currentJob.matchScore}%`;
                document.getElementById('viewCount').textContent = `${this.formatViews(this.currentJob.views)} مشاهدات`;
            }

            renderSimilarJobs() {
                const container = document.getElementById('similarJobsContainer');
                container.innerHTML = this.similarJobs.map(job => `
                    <div class="similar-job-card touch-feedback" onclick="jobSystem.viewSimilarJob(${job.id})">
                        <div class="similar-job-header">
                            <div>
                                <div class="similar-job-title">${job.title}</div>
                                <div class="similar-job-company">${job.company}</div>
                            </div>
                            <div class="similar-job-price">${job.price.toLocaleString()} ريال</div>
                        </div>
                        <div class="similar-job-meta">
                            <span>${job.type}</span>
                            <span>•</span>
                            <span>${job.deadline}</span>
                            <span>•</span>
                            <span>${job.matchScore}% مطابقة</span>
                        </div>
                    </div>
                `).join('');
            }

            updateActionButtons() {
                const saveButton = document.getElementById('saveButton');
                const likeButton = document.getElementById('likeButton');
                const applyButton = document.getElementById('applyButton');
                
                // تحديث زر الحفظ
                saveButton.innerHTML = this.isJobSaved ? 
                    '<i class="fas fa-bookmark"></i>' : 
                    '<i class="far fa-bookmark"></i>';
                saveButton.classList.toggle('active', this.isJobSaved);
                
                // تحديث زر الإعجاب
                likeButton.innerHTML = this.isJobLiked ? 
                    '<i class="fas fa-heart"></i>' : 
                    '<i class="far fa-heart"></i>';
                likeButton.classList.toggle('active', this.isJobLiked);
                
                // تحديث زر التقديم
                if (this.hasApplied) {
                    applyButton.innerHTML = '<i class="fas fa-check"></i><span>تم التقديم</span>';
                    applyButton.classList.add('applied');
                    applyButton.disabled = true;
                } else {
                    applyButton.innerHTML = '<i class="fas fa-paper-plane"></i><span>تقدم الآن</span>';
                    applyButton.classList.remove('applied');
                    applyButton.disabled = false;
                }
            }

            formatViews(views) {
                if (views >= 1000) {
                    return (views / 1000).toFixed(1) + 'K';
                }
                return views.toString();
            }

            async toggleSaveJob() {
                this.isJobSaved = !this.isJobSaved;
                
                if (this.isJobSaved) {
                    this.showToast('تم حفظ الوظيفة في المفضلة', 'success');
                    this.userProfile.savedJobs.push(this.jobId);
                } else {
                    this.showToast('تمت إزالة الوظيفة من المفضلة', 'info');
                    const index = this.userProfile.savedJobs.indexOf(this.jobId);
                    if (index > -1) {
                        this.userProfile.savedJobs.splice(index, 1);
                    }
                }
                
                localStorage.setItem('savedJobs', JSON.stringify(this.userProfile.savedJobs));
                this.updateActionButtons();
            }

            async toggleLikeJob() {
                this.isJobLiked = !this.isJobLiked;
                
                if (this.isJobLiked) {
                    this.showToast('تمت الإعجاب بالوظيفة', 'success');
                    this.userProfile.likedJobs.push(this.jobId);
                } else {
                    this.showToast('تم إلغاء الإعجاب', 'info');
                    const index = this.userProfile.likedJobs.indexOf(this.jobId);
                    if (index > -1) {
                        this.userProfile.likedJobs.splice(index, 1);
                    }
                }
                
                localStorage.setItem('likedJobs', JSON.stringify(this.userProfile.likedJobs));
                this.updateActionButtons();
            }

            async applyForJob() {
                if (this.hasApplied) {
                    this.showToast('لقد تقدمت لهذه الوظيفة بالفعل', 'info');
                    return;
                }
                
                this.openApplicationModal();
            }

            openApplicationModal(type = 'quick') {
                const modal = document.getElementById('applicationModal');
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');
                
                if (type === 'quick') {
                    modalTitle.textContent = 'التقديم السريع';
                    modalBody.innerHTML = this.getQuickApplyForm();
                } else {
                    modalTitle.textContent = 'التقديم المتقدم';
                    modalBody.innerHTML = this.getAdvancedApplyForm();
                }
                
                modal.classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            getQuickApplyForm() {
                return `
                    <div style="padding: 20px;">
                        <h3 style="margin-bottom: 20px; color: var(--text-primary);">التقديم باستخدام بياناتك المخزنة</h3>
                        
                        <div style="background: var(--bg-secondary); padding: 20px; border-radius: 16px; margin-bottom: 24px;">
                            <h4 style="color: var(--text-primary); margin-bottom: 12px;">ملفك الشخصي</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 8px;"><strong>الاسم:</strong> ${this.userProfile.name}</p>
                            <p style="color: var(--text-secondary); margin-bottom: 8px;"><strong>المهارات:</strong> ${this.userProfile.skills.join(', ')}</p>
                            <p style="color: var(--text-secondary);"><strong>الخبرة:</strong> ${this.userProfile.experience}</p>
                        </div>
                        
                        <div style="margin-bottom: 24px;">
                            <label style="display: block; margin-bottom: 8px; color: var(--text-primary); font-weight: 600;">السعر المقترح (ريال)</label>
                            <input type="number" 
                                   id="proposedPrice" 
                                   value="${this.currentJob.price}"
                                   style="width: 100%; padding: 16px; background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: 12px; color: var(--text-primary); font-size: 16px; transition: all 0.2s;" 
                                   onfocus="this.style.borderColor='var(--primary-color)'; this.style.boxShadow='0 0 0 4px rgba(10, 147, 150, 0.1)'"
                                   onblur="this.style.borderColor='var(--border-color)'; this.style.boxShadow='none'">
                        </div>
                        
                        <div style="margin-bottom: 32px;">
                            <label style="display: block; margin-bottom: 8px; color: var(--text-primary); font-weight: 600;">رسالة التقديم (اختياري)</label>
                            <textarea id="coverLetter" 
                                      rows="4" 
                                      placeholder="اكتب رسالة مختصرة توضح سبب اهتمامك بالوظيفة..."
                                      style="width: 100%; padding: 16px; background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: 12px; color: var(--text-primary); font-size: 16px; resize: vertical; transition: all 0.2s;"
                                      onfocus="this.style.borderColor='var(--primary-color)'; this.style.boxShadow='0 0 0 4px rgba(10, 147, 150, 0.1)'"
                                      onblur="this.style.borderColor='var(--border-color)'; this.style.boxShadow='none'"></textarea>
                        </div>
                        
                        <button onclick="jobSystem.submitApplication('quick')" 
                                style="width: 100%; padding: 18px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; border: none; border-radius: 16px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.2s;"
                                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 32px rgba(0,0,0,0.2)'"
                                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            <i class="fas fa-paper-plane" style="margin-left: 8px;"></i>
                            إرسال الطلب
                        </button>
                    </div>
                `;
            }

            getAdvancedApplyForm() {
                return `
                    <div style="padding: 20px;">
                        <div style="margin-bottom: 32px;">
                            <h3 style="margin-bottom: 16px; color: var(--text-primary);">رفع المستندات</h3>
                            
                            <div style="background: var(--bg-secondary); border: 2px dashed var(--border-color); border-radius: 16px; padding: 40px; text-align: center; margin-bottom: 16px; cursor: pointer;" 
                                 onclick="jobSystem.uploadFile('cv')"
                                 onmouseover="this.style.borderColor='var(--primary-color)'"
                                 onmouseout="this.style.borderColor='var(--border-color)'">
                                <i class="fas fa-file-upload" style="font-size: 48px; color: var(--primary-color); margin-bottom: 16px;"></i>
                                <h4 style="color: var(--text-primary); margin-bottom: 8px;">السيرة الذاتية</h4>
                                <p style="color: var(--text-secondary);">انقر لرفع ملف السيرة الذاتية (PDF أو DOC)</p>
                            </div>
                            
                            <div style="background: var(--bg-secondary); border: 2px dashed var(--border-color); border-radius: 16px; padding: 40px; text-align: center; margin-bottom: 16px; cursor: pointer;"
                                 onclick="jobSystem.uploadFile('portfolio')"
                                 onmouseover="this.style.borderColor='var(--primary-color)'"
                                 onmouseout="this.style.borderColor='var(--border-color)'">
                                <i class="fas fa-images" style="font-size: 48px; color: var(--primary-color); margin-bottom: 16px;"></i>
                                <h4 style="color: var(--text-primary); margin-bottom: 8px;">محفظة الأعمال</h4>
                                <p style="color: var(--text-secondary);">انقر لرفع محفظة أعمالك (PDF أو رابط)</p>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 32px;">
                            <h3 style="margin-bottom: 16px; color: var(--text-primary);">تفاصيل العرض</h3>
                            
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 16px;">
                                <div>
                                    <label style="display: block; margin-bottom: 8px; color: var(--text-primary); font-weight: 600;">السعر المقترح</label>
                                    <input type="number" 
                                           id="advancedPrice"
                                           value="${this.currentJob.price}"
                                           style="width: 100%; padding: 12px; background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: 12px; color: var(--text-primary); font-size: 14px;">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 8px; color: var(--text-primary); font-weight: 600;">المدة المقترحة</label>
                                    <select style="width: 100%; padding: 12px; background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: 12px; color: var(--text-primary); font-size: 14px;">
                                        <option>1-3 أشهر</option>
                                        <option>3-6 أشهر</option>
                                        <option>6-12 شهر</option>
                                        <option>أكثر من سنة</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 8px; color: var(--text-primary); font-weight: 600;">رسالة التقديم</label>
                                <textarea rows="6" 
                                          style="width: 100%; padding: 16px; background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: 12px; color: var(--text-primary); font-size: 14px; resize: vertical;"></textarea>
                            </div>
                        </div>
                        
                        <button onclick="jobSystem.submitApplication('advanced')" 
                                style="width: 100%; padding: 18px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; border: none; border-radius: 16px; font-size: 16px; font-weight: 700; cursor: pointer;">
                            <i class="fas fa-paper-plane" style="margin-left: 8px;"></i>
                            إرسال الطلب المتقدم
                        </button>
                    </div>
                `;
            }

            async submitApplication(type) {
                // محاكاة إرسال الطلب
                this.showLoading('جاري إرسال طلبك...');
                
                setTimeout(async () => {
                    this.hasApplied = true;
                    this.userProfile.appliedJobs.push(this.jobId);
                    localStorage.setItem('appliedJobs', JSON.stringify(this.userProfile.appliedJobs));
                    
                    this.showToast('تم إرسال طلبك بنجاح!', 'success');
                    this.updateActionButtons();
                    this.closeApplicationModal();
                    
                    // زيادة عدد المتقدمين
                    this.currentJob.applicants++;
                    this.renderJobStats();
                    
                    // إشعار المستخدم
                    this.showApplicationSuccessMessage();
                }, 2000);
            }

            showApplicationSuccessMessage() {
                const message = `
                    <div style="position: fixed; top: 100px; left: 20px; right: 20px; background: linear-gradient(135deg, var(--success-color), #21867a); color: white; padding: 20px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.2); z-index: var(--z-toast); animation: slideInUp 0.4s ease-out;">
                        <div style="display: flex; align-items: flex-start; gap: 12px;">
                            <i class="fas fa-check-circle" style="font-size: 24px; margin-top: 2px;"></i>
                            <div style="flex: 1;">
                                <h4 style="margin-bottom: 8px; font-size: 16px;">تم التقديم بنجاح!</h4>
                                <p style="font-size: 14px; opacity: 0.9;">سيتم مراجعة طلبك وإعلامك بالنتيجة خلال 3-5 أيام عمل.</p>
                            </div>
                            <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                const div = document.createElement('div');
                div.innerHTML = message;
                document.body.appendChild(div);
                
                setTimeout(() => {
                    if (div.parentNode) {
                        div.remove();
                    }
                }, 5000);
            }

            viewSimilarJob(jobId) {
                this.showLoading('جاري تحميل الوظيفة...');
                setTimeout(() => {
                    window.location.href = `job-details.html?id=${jobId}`;
                }, 500);
            }

            viewCompanyProfile() {
                this.showToast('جاري تحميل صفحة الشركة...', 'info');
                // في التطبيق الحقيقي، سيتم التوجيه لصفحة الشركة
            }

            openChat() {
                this.showToast('جاري فتح المحادثة...', 'info');
                // في التطبيق الحقيقي، سيتم فتح نافذة الدردشة
            }

            showNextJob() {
                const nextJobId = this.jobId + 1;
                if (nextJobId <= 5) {
                    this.showLoading('جاري تحميل الوظيفة التالية...');
                    setTimeout(() => {
                        window.location.href = `job-details.html?id=${nextJobId}`;
                    }, 500);
                }
            }

            showLoading(message) {
                const loading = `
                    <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center; z-index: var(--z-modal);">
                        <div style="background: var(--glass-bg); padding: 32px; border-radius: 24px; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.3);">
                            <div style="width: 60px; height: 60px; border: 4px solid var(--border-color); border-top-color: var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                            <div style="color: var(--text-primary); font-weight: 600;">${message}</div>
                        </div>
                    </div>
                `;
                
                const div = document.createElement('div');
                div.id = 'loadingOverlay';
                div.innerHTML = loading;
                document.body.appendChild(div);
            }

            hideLoading() {
                const loading = document.getElementById('loadingOverlay');
                if (loading) {
                    loading.remove();
                }
            }

            showLoadingAnimation() {
                document.body.style.opacity = '0.7';
                document.body.style.transition = 'opacity 0.3s';
                
                setTimeout(() => {
                    document.body.style.opacity = '1';
                }, 300);
            }

            showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = 'toast-message';
                toast.style.cssText = `
                    position: fixed;
                    bottom: 120px;
                    left: 20px;
                    right: 20px;
                    background: ${type === 'success' ? 'linear-gradient(135deg, var(--success-color), #21867a)' : 
                                type === 'error' ? 'linear-gradient(135deg, var(--danger-color), #d1664b)' :
                                'linear-gradient(135deg, var(--primary-color), var(--accent-color))'};
                    color: white;
                    padding: 16px 20px;
                    border-radius: 16px;
                    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                    z-index: var(--z-toast);
                    animation: slideInUp 0.3s ease-out;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                `;
                
                const icon = type === 'success' ? 'check-circle' : 
                           type === 'error' ? 'exclamation-circle' : 'info-circle';
                
                toast.innerHTML = `
                    <i class="fas fa-${icon}" style="font-size: 20px;"></i>
                    <div style="flex: 1; font-size: 14px;">${message}</div>
                `;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transform = 'translateY(20px)';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }

            showWelcomeMessage() {
                setTimeout(() => {
                    this.showToast('مرحباً! يمكنك سحب الشاشة لليسار للانتقال لوظيفة أخرى', 'info');
                }, 1000);
            }

            incrementViewCount() {
                // زيادة عدد المشاهدات
                this.currentJob.views++;
                this.renderJobStats();
                
                // حفظ في localStorage لمحاكاة قاعدة البيانات
                setTimeout(() => {
                    localStorage.setItem(`job_${this.jobId}_views`, this.currentJob.views);
                }, 1000);
            }

            updateTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('ar-SA', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                });
                document.getElementById('currentTime').textContent = timeString;
                
                setTimeout(() => this.updateTime(), 60000);
            }

            closeApplicationModal() {
                document.getElementById('applicationModal').classList.remove('show');
                document.body.style.overflow = 'auto';
                this.hideLoading();
            }

            startRealTimeUpdates() {
                // محاكاة تحديثات حية
                setInterval(() => {
                    this.currentJob.applicants += Math.floor(Math.random() * 2);
                    this.currentJob.views += Math.floor(Math.random() * 10);
                    this.renderJobStats();
                }, 30000); // تحديث كل 30 ثانية
            }

            uploadFile(type) {
                this.showToast(`جاري رفع ${type === 'cv' ? 'السيرة الذاتية' : 'محفظة الأعمال'}...`, 'info');
                
                // محاكاة رفع الملف
                setTimeout(() => {
                    this.showToast('تم رفع الملف بنجاح', 'success');
                }, 2000);
            }
        }

        // تهيئة النظام
        let jobSystem;

        document.addEventListener('DOMContentLoaded', () => {
            jobSystem = new JobDetailsSystem();
        });

        // دالات الواجهة العامة
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const icon = document.querySelector('#darkModeToggle i');
            if (document.body.classList.contains('dark-mode')) {
                icon.className = 'fas fa-sun';
                localStorage.setItem('darkMode', 'true');
            } else {
                icon.className = 'fas fa-moon';
                localStorage.setItem('darkMode', 'false');
            }
        }

        function toggleNotifications() {
            jobSystem.showToast('صفحة الإشعارات قيد التطوير', 'info');
        }

        function toggleShare() {
            if (navigator.share) {
                navigator.share({
                    title: jobSystem.currentJob.title,
                    text: `اطلع على هذه الوظيفة: ${jobSystem.currentJob.title}`,
                    url: window.location.href
                });
            } else {
                jobSystem.showToast('شارك الرابط: ' + window.location.href, 'info');
            }
        }

        function openQuickApply() {
            jobSystem.openApplicationModal('quick');
        }

        function openAdvancedApply() {
            jobSystem.openApplicationModal('advanced');
        }

        function closeApplicationModal() {
            jobSystem.closeApplicationModal();
        }

        function toggleSaveJob() {
            jobSystem.toggleSaveJob();
        }

        function toggleLikeJob() {
            jobSystem.toggleLikeJob();
        }

        function openChat() {
            jobSystem.openChat();
        }

        // التحقق من الوضع المحفوظ
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.querySelector('#darkModeToggle i').className = 'fas fa-sun';
        }

        // إضافة أنيميشن للدوران
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);

        // تحسينات لأجهزة Android
        document.addEventListener('touchstart', () => {}, { passive: true });
        document.addEventListener('touchmove', () => {}, { passive: true });
    </script>
</body>
</html>